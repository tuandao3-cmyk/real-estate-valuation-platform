{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "ImageMetadata",
    "description": "Canonical schema describing metadata and provenance of images used as supporting evidence in valuation. This schema captures factual attributes only. It performs NO image analysis, NO valuation inference, NO risk assessment, and NO decision-making. valuation_dossier.json remains the Single Source of Truth.",
    "type": "object",
    "additionalProperties": false,
    "required": [
        "image_id",
        "related_entity_type",
        "related_entity_id",
        "capture_timestamp_utc",
        "source_type",
        "integrity",
        "jurisdiction"
    ],
    "properties": {
        "image_id": {
            "type": "string",
            "description": "Unique identifier of the image artifact."
        },
        "related_entity_type": {
            "type": "string",
            "enum": [
                "PROPERTY",
                "TRANSACTION",
                "INSPECTION",
                "OTHER"
            ],
            "description": "Type of entity this image is associated with."
        },
        "related_entity_id": {
            "type": "string",
            "description": "Identifier of the related entity. No assumption of relevance or correctness is implied."
        },
        "capture_timestamp_utc": {
            "type": "string",
            "format": "date-time",
            "description": "UTC timestamp when the image was captured, if known."
        },
        "upload_timestamp_utc": {
            "type": "string",
            "format": "date-time",
            "description": "UTC timestamp when the image was uploaded into the system."
        },
        "source_type": {
            "type": "string",
            "enum": [
                "HUMAN_UPLOADED",
                "INSPECTION_DEVICE",
                "THIRD_PARTY_PROVIDER",
                "PUBLIC_SOURCE",
                "UNKNOWN"
            ],
            "description": "Declared source category of the image."
        },
        "captured_by": {
            "type": "string",
            "description": "Declared actor or system that captured the image."
        },
        "device_metadata": {
            "type": "object",
            "description": "Declared device metadata at the time of capture, if available.",
            "additionalProperties": false,
            "properties": {
                "device_type": {
                    "type": "string",
                    "description": "Type of device used to capture the image."
                },
                "manufacturer": {
                    "type": "string",
                    "description": "Declared device manufacturer."
                },
                "model": {
                    "type": "string",
                    "description": "Declared device model."
                }
            }
        },
        "location_metadata": {
            "type": "object",
            "description": "Declared capture location metadata, if available.",
            "additionalProperties": false,
            "properties": {
                "latitude": {
                    "type": "number",
                    "minimum": -90,
                    "maximum": 90
                },
                "longitude": {
                    "type": "number",
                    "minimum": -180,
                    "maximum": 180
                },
                "location_accuracy_meters": {
                    "type": "number",
                    "minimum": 0
                }
            }
        },
        "integrity": {
            "type": "object",
            "description": "Integrity and immutability attributes of the image artifact.",
            "additionalProperties": false,
            "required": [
                "content_hash",
                "hash_algorithm",
                "tamper_evident"
            ],
            "properties": {
                "content_hash": {
                    "type": "string",
                    "description": "Cryptographic hash of the image content."
                },
                "hash_algorithm": {
                    "type": "string",
                    "description": "Hash algorithm used (e.g., SHA-256)."
                },
                "tamper_evident": {
                    "type": "boolean",
                    "description": "Whether the image is protected by tamper-evident storage."
                }
            }
        },
        "verification_status": {
            "type": "string",
            "enum": [
                "VERIFIED",
                "PARTIALLY_VERIFIED",
                "UNVERIFIED",
                "DISPUTED"
            ],
            "description": "Declared verification status of the image metadata. Verification logic is handled outside this schema."
        },
        "usage_restrictions": {
            "type": "object",
            "description": "Declared legal or policy restrictions on image usage.",
            "additionalProperties": false,
            "properties": {
                "privacy_restricted": {
                    "type": "boolean",
                    "description": "Whether the image is subject to privacy restrictions."
                },
                "internal_use_only": {
                    "type": "boolean",
                    "description": "Whether the image is restricted to internal use."
                }
            }
        },
        "jurisdiction": {
            "type": "string",
            "description": "Legal jurisdiction governing the image data (e.g., VN)."
        }
    }
}